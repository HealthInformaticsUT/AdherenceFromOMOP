<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Intro to CMA • AdherenceFromOMOP</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Intro to CMA">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">AdherenceFromOMOP</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a01-getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/a02-generate-data.html">Data generation</a></li>
    <li><a class="dropdown-item" href="../articles/a03-calculating-adherence.html">Calculating Adherence</a></li>
    <li><a class="dropdown-item" href="../articles/a04-adherence.html">Intro to CMA</a></li>
    <li><a class="dropdown-item" href="../articles/a05-examples.html">Example use cases with statins</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Intro to CMA</h1>
            
      

      <div class="d-none name"><code>a04-adherence.Rmd</code></div>
    </div>

    
    
<p>Medication adherence can be quantified in several different ways
depending on how days supply, gaps, and observation periods are
interpreted.<br>
The AdherenceFromOMOP package supports all nine variations of
<em>Continuous Multiple-Interval Measures of Medication
Availability/Gaps</em> (CMA1–CMA9) implemented in AdhereR.<br>
This vignette provides short examples of how each CMA behaves using a
small synthetic dataset.</p>
<p>For detailed documentation, see: <a href="https://www.adherer.eu/adherence/" class="external-link uri">https://www.adherer.eu/adherence/</a></p>
<div class="section level2">
<h2 id="example-dataset">Example Dataset<a class="anchor" aria-label="anchor" href="#example-dataset"></a>
</h2>
<table class="table">
<colgroup>
<col width="6%">
<col width="10%">
<col width="16%">
<col width="7%">
<col width="11%">
<col width="10%">
<col width="19%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="right">person_id</th>
<th align="right">drug_concept_id</th>
<th align="left">drug_exposure_start_date</th>
<th align="right">days_supply</th>
<th align="left">cohort_start_date</th>
<th align="left">cohort_end_date</th>
<th align="left">observation_period_start_date</th>
<th align="left">observation_period_end_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2010-12-02</td>
<td align="right">60</td>
<td align="left">2011-01-06</td>
<td align="left">2012-05-01</td>
<td align="left">2009-11-07</td>
<td align="left">2013-06-01</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2011-05-31</td>
<td align="right">30</td>
<td align="left">2011-01-06</td>
<td align="left">2012-05-01</td>
<td align="left">2009-11-07</td>
<td align="left">2013-06-01</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2011-06-30</td>
<td align="right">90</td>
<td align="left">2011-01-06</td>
<td align="left">2012-05-01</td>
<td align="left">2009-11-07</td>
<td align="left">2013-06-01</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2011-12-27</td>
<td align="right">180</td>
<td align="left">2011-01-06</td>
<td align="left">2012-05-01</td>
<td align="left">2009-11-07</td>
<td align="left">2013-06-01</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2012-03-26</td>
<td align="right">180</td>
<td align="left">2011-01-06</td>
<td align="left">2012-05-01</td>
<td align="left">2009-11-07</td>
<td align="left">2013-06-01</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2011-05-31</td>
<td align="right">60</td>
<td align="left">2011-01-06</td>
<td align="left">2012-05-01</td>
<td align="left">2009-11-07</td>
<td align="left">2013-06-01</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2011-06-30</td>
<td align="right">90</td>
<td align="left">2011-01-06</td>
<td align="left">2012-05-01</td>
<td align="left">2009-11-07</td>
<td align="left">2013-06-01</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="left">2011-12-27</td>
<td align="right">30</td>
<td align="left">2011-01-06</td>
<td align="left">2012-05-01</td>
<td align="left">2009-11-07</td>
<td align="left">2013-06-01</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">1</td>
<td align="left">2011-06-30</td>
<td align="right">90</td>
<td align="left">2011-01-06</td>
<td align="left">2012-05-01</td>
<td align="left">2009-11-07</td>
<td align="left">2013-06-01</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="cma1">CMA1<a class="anchor" aria-label="anchor" href="#cma1"></a>
</h2>
<p>Medication availability based on days supplied (excluding last
event)</p>
<ul>
<li>Events that start before observation window are not included</li>
</ul>
<!-- --><ul>
<li><p>Requires ≥2 events</p></li>
<li><p>Computes: <strong>sum(days_supply values except last) / (days
between first and last event)</strong></p></li>
</ul>
<p><img src="a04-adherence_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="cma2">CMA2<a class="anchor" aria-label="anchor" href="#cma2"></a>
</h2>
<p>Medication availability including the last event, but using
observation window end</p>
<ul>
<li>Events that start before observation window are not included</li>
</ul>
<!-- --><ul>
<li>Computes: <strong>sum(all days_supply values) / (time from first
event → observation window end)</strong>
</li>
</ul>
<p><img src="a04-adherence_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="cma-3-4">CMA 3 &amp; 4<a class="anchor" aria-label="anchor" href="#cma-3-4"></a>
</h2>
<p>Same formulas as CMA1 and CMA2, but capped at 100%.</p>
</div>
<div class="section level2">
<h2 id="cma-5">CMA 5<a class="anchor" aria-label="anchor" href="#cma-5"></a>
</h2>
<p>Proportion of gap days relative to time between first and last event.
Equivalent to 1 – CMA1 but computed using theoretical use and
accumulated gap time.</p>
<ul>
<li><p>Requires ≥2 events</p></li>
<li><p>Events that start before observation window are not
included</p></li>
<li>
<p>Computes: <strong>(number of days of theoretical use) / (days
between first and last event)</strong></p>
<ul>
<li>Theoretical use for sample patient number 1: 30 + 90 + 90. The start
of the last event cuts off the length of the second from last event. In
CMA1 the second from last event is included entirely.</li>
</ul>
</li>
</ul>
<p><img src="a04-adherence_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="cma6">CMA6<a class="anchor" aria-label="anchor" href="#cma6"></a>
</h2>
<p>Proportion of gap days relative to time between first and end of
observation window. Equivalent to 1 – CMA2 but computed using
theoretical use and accumulated gap time.</p>
<ul>
<li>Events that start before observation window are not included</li>
</ul>
<!-- --><ul>
<li>
<p>Computes: <strong>(number of days of theoretical use) / (days
between first and last event)</strong></p>
<ul>
<li>Theoretical use for sample patient number 1: 30 + 90 + 90 + 36.</li>
</ul>
</li>
</ul>
<p><img src="a04-adherence_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="cma7">CMA7<a class="anchor" aria-label="anchor" href="#cma7"></a>
</h2>
<p>Gap-based measure using the full observation window start → end. No
anchoring on first event. This measures adherence relative to the entire
observation period.</p>
<ul>
<li>Includes events from before the observation period starts</li>
</ul>
<!-- --><ul>
<li>
<p>Computes: <strong>(number of days of theoretical use) / (number
of days in observation window)</strong></p>
<ul>
<li>Theoretical use for sample patient number 1: 25 + 30 + 90 + 90 +
36.</li>
</ul>
</li>
</ul>
<p><img src="a04-adherence_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="cma8">CMA8<a class="anchor" aria-label="anchor" href="#cma8"></a>
</h2>
<p>Lagged version of CMA7. The observation window starts after a short
“lag” from the event that starts before the observation window. Useful
when excluding an initial adjustment period.</p>
<ul>
<li>
<p>Computes: <strong>(number of days of theoretical use) / (lagged
start to end of observation window)</strong></p>
<ul>
<li>Number of days accounting for lagged start for patient 1: 481 -
25.</li>
</ul>
</li>
</ul>
<p><img src="a04-adherence_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="cma9">CMA9<a class="anchor" aria-label="anchor" href="#cma9"></a>
</h2>
<p>Weighted daily adherence measure. This method evaluates, for every
day, how much medication supply covers that day and averages across the
entire window. Useful when event timing and overlaps matter
substantially.</p>
<ul>
<li>
<p>Computes <strong>(number of days in the observation window, each
weighted by the ratio of days supply applicable to their event interval)
/ (start to end of observation window)</strong></p>
<ul>
<li>
<p>Patient 3: ((1 - 612/702) * 306) / 481</p>
<ul>
<li><p>612 number of gap days between the end of the first (and only)
event and the end of the follow-up window.</p></li>
<li><p>702 number of days between the start of the first event and the
end of the follow-up window.</p></li>
<li><p>306 number of days between the start of the first event and the
end of the observation window.</p></li>
<li><p>481 total length of the observation window.</p></li>
</ul>
</li>
<li><p>Patient 2: ((1 - 0/30)30 + (1 - 60/180)180 + (1 - 492/522) * 126)
/ 481</p></li>
<li><p>Patient 1: ((1 - 120/180)145 + (1 - 0/30)30 + (1 - 90/180)180 +
(1 - 0/90) 90 + (1 - 162/432) * 36) / 481</p></li>
</ul>
</li>
</ul>
<p><img src="a04-adherence_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Holm, Greete Kelli Aava.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
